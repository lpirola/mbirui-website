---
import { getCollection } from 'astro:content';
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';

const pesquisas = await getCollection('pesquisa');

const metadata = {
  title: 'Pesquisa — Projeto Mbiru\'i',
  description: 'Pesquisas em saúde indígena.',
};
---

<Layout metadata={metadata}>
  <Hero>
    <Fragment slot="title">
      Pesquisa em <span class="text-accent dark:text-white">Saúde Indígena</span>
    </Fragment>

    <Fragment slot="subtitle">
      Contexto epidemiológico e referências.
    </Fragment>
  </Hero>

  <section class="py-12 sm:py-16 lg:py-20">
    <div class="container mx-auto px-4 max-w-4xl">
      <ul class="space-y-6">
        {pesquisas.map(({ slug, data }) => (
          <li class="border rounded-lg p-6 hover:shadow-lg transition-shadow">
            <h3 class="text-xl font-semibold mb-2">
              <a href={`/pesquisa/${slug}`}>
                {data.title}
              </a>
            </h3>
            {data.area && (
              <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">
                Área: {data.area}
              </p>
            )}
            {data.descricao && (
              <p class="text-gray-600 dark:text-gray-300">{data.descricao}</p>
            )}
          </li>
        ))}
      </ul>
    </div>
  </section>
</Layout>
